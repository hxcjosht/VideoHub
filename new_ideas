local cjson = require("cjson")

-- Open the file in write mode
local file = io.open("device_response.json", "w")

-- Convert the device response to JSON format
local json_response = cjson.encode(device_response)

-- Write the JSON string to the file
file:write(json_response)

-- Close the file
file:close()

-- Open the file in read mode
file = io.open("device_response.json", "r")

-- Read the contents of the file
local contents = file:read("*all")

-- Parse the JSON data
local parsed_data = cjson.decode(contents)

-- Fill the table with the parsed data
local table_name = "INPUT_LABELS"
for k, v in pairs(parsed_data) do
  qsys.SetTableValue(table_name, k, v)
end

-- Close the file
file:close()

local cjson = require("cjson")

-- Read the JSON string
local json_string = '{"data": [{"INPUT LABELS:": [line1, line2, line3, ..., line40]}]}'

-- Parse the JSON string
local parsed_data = cjson.decode(json_string)

-- Find the "INPUT LABELS:" data
local lines = {}
for k, v in pairs(parsed_data.data) do
  if k == "INPUT LABELS:" then
    lines = v
    break
  end
end

-- Store the first 39 lines in a table in Q-Sys
local table_name = "INPUT_LABELS"
for i = 1, 39 do
  qsys.SetTableValue(table_name, i, lines[i])
end
